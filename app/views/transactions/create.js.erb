<% if @transaction.persisted? %>
  $("<%=j render('transactions/transaction', transaction: @transaction) %>").hide().prependTo(".transactions").fadeIn(1000);
  $("#new_transaction").replaceWith("<%=j render('transactions/form', transaction: Transaction.new(fixed_category_id: @fixed_category.try(:id)), fixed_category: @fixed_category) %>");
  scrollTo($("#<%= dom_id(@transaction) %>"));
<% else %>
  $("#new_transaction").replaceWith("<%=j render('transactions/form', transaction: @transaction, fixed_category: @fixed_category) %>");
<% end %>
