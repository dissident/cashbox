<% if @transaction.persisted? %>
  if ($('.transactions').size() == 0) {
    // need to reload because there is no ransack initialized & no transactions table
    location.reload();
  }
  else {
    var element_id = "#<%= dom_id(@transaction) %>";
    var element = "<%=j render('transactions/transaction', transaction: @transaction) %>";
    var sidebar = "<%= j render('home/sidebar') %>";
    var total_balance = "<%= j render('shared/layout/total_balance') %>";
    addTransactionToList(element_id, element, sidebar, total_balance);
    $('#transaction_modal').modal('hide');
    scrollTo($("#<%= dom_id(@transaction) %>"));
  }
<% else %>
  if ($(".tab-pane.active").attr('id') == 'income') {
    $(".tab-pane.active #new_transaction").replaceWith("<%=j render('transactions/form', type: 'Income', transaction: @transaction) %>");
  }
  else {
    $(".tab-pane.active #new_transaction").replaceWith("<%=j render('transactions/form', type: 'Expense', transaction: @transaction) %>");
  }
<% end %>

addTransactionFormMasks();
