$('#transaction_modal').on('hidden.bs.modal', function () {
  $('#content').html("<%= j render('transactions/modal_content') %>");

  <% if params[:invoice_id] %>
    $('li.expense').remove();
    $('li.income').addClass('active');
    $('.tab-pane#income').addClass('active');
    $('li.transfer').remove();
  <% else %>
    var transaction_type_selector = [
      '#transaction_type a[href=',
      "<%= transaction_type_id(@transaction) %>",
      ']'
    ].join('');
    $(transaction_type_selector).tab('show');
  <% end %>

  $('#transaction_modal').modal('show');
  $('#transaction_modal').off('hidden.bs.modal');

  addTransactionFormMasks();
  addTranferFormMasks();

  <% if @transaction.transfer? %>
    prepRateAndHints(exchange_rate = true);
  <% end %>
});

$('#transaction_modal').modal('hide');
